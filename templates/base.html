<!doctype html>
<html lang="en">
  <head>
    {% block style %}{% endblock %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %} {% endblock title %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" rel="stylesheet">


    <style>
   body {
    background-color: #fff;
    color: #212529;
    transition: background 0.3s ease, color 0.3s ease;
  }

  .dark-mode {
    background-color: #121212;
    color: #f1f1f1;
  }

  .dark-mode .card {
    background-color: #1e1e1e;
    color: #ddd;
  }

  .dark-mode .btn {
    border-color: #bbb;
    color: #fff;
  }

  .dark-mode .btn-primary {
    background-color: #0d6efd;
    border-color: #0d6efd;
  }

  .dark-mode hr {
    border-top-color: #444;
  } 



  /* === DARK MODE TEXT FIXES === */

.dark-mode {
  background-color: #121212;
  color: #f1f1f1;
}

.dark-mode h1,
.dark-mode h2,
.dark-mode h3,
.dark-mode p,
.dark-mode span,
.dark-mode a,
.dark-mode small,
.dark-mode li {
  color: #f1f1f1 !important;
}

.dark-mode .text-muted,
.dark-mode .text-secondary {
  color: #aaa !important;
}

.dark-mode a {
  color: #4dabf7;
}
.dark-mode a:hover {
  color: #91d5ff;
}

.dark-mode .card {
  background-color: #1e1e1e;
  color: #ddd;
  border-color: #333;
}

.dark-mode .btn-outline-secondary {
  color: #ddd;
  border-color: #888;
}

.dark-mode .btn-primary {
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: #fff;
}

.dark-mode  {
  color: #f1f1f1 !important;
}

.dark-mode .modal-content {
  background-color: #1e1e1e;
  color: #f1f1f1;
  border-color: #333;
}

.dark-mode .form-control {
  background-color: #2a2a2a;
  color: #f1f1f1;
  border: 1px solid #555;
}

.dark-mode .form-label,
.dark-mode .form-check-label,
.dark-mode small {
  color: #ccc;
}

.dark-mode .btn-close {
  filter: invert(1); /* makes close icon visible in dark */
}

.dark-mode input,
.dark-mode textarea {
  background-color: #2a2a2a;
  color: #f1f1f1;
  border-color: #444;
}

.dark-mode input::placeholder,
.dark-mode textarea::placeholder {
  color: #bbb;
}
/* Dark Mode Dropdown Fixes */
.dark-mode .dropdown-menu {
  background-color: #1e1e1e;
  border: 1px solid #444;
}


.dark-mode .dropdown-item.text-danger {
  color: #ff6b6b !important; /* Softer red, high contrast */
}

.dark-mode .dropdown-item:hover {
  background-color: #2a2a2a;
  color: #ffffff;
}


</style>

  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">Teche-Blog</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link {% block homeactive %}{% endblock homeactive %}" aria-current="page" href="/">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link {% block aboutactive %}{% endblock aboutactive %}" href="/about">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link {% block blogactive %}{% endblock blogactive %}" href="/blog">Blog</a>
              </li>
              <li class="nav-item">
                <a class="nav-link {% block contactactive %}{% endblock contactactive %}" href="/contact">Contact</a>
              </li>
            </ul>
            <form method="get" action="/search" class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="queary" id="queary">
              <button class="btn btn-primary" type="submit">Search</button>
            </form>
            {% if user.is_authenticated %}
            <ul class="navbar-nav mr-2">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Welcome {{ user.username }}
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item text-danger" href="/logout/">Logout</a></li>
                </ul>
              </li>
            </ul>

            
            {%else%}
            <!-- Button to Login -->
            <button type="button" class="btn btn-primary mx-1" data-bs-toggle="modal" data-bs-target="#loginModal">
            Login
            </button>
            <!-- Button to SingUp -->
            <button type="button" class="btn btn-primary mx-1" data-bs-toggle="modal" data-bs-target="#signupModal">
            SignUp
            </button>

            {% endif %}

            <button id="darkToggle" class="btn btn-outline-secondary ms-2">
            🌙 Dark Mode
            </button>

          </div>
        </div>
      </nav>




      
<!-- SignUp Modal -->
<div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-4" id="signupModalTitle">Sign Up</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action='/signup/' method='post'>
          {% csrf_token %}
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Enter username" required>
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="fname" class="form-label">First Name</label>
              <input type="text" class="form-control" id="fname" name="fname" placeholder="First Name" required>
            </div>
            <div class="col-md-6 mb-3">
              <label for="lname" class="form-label">Last Name</label>
              <input type="text" class="form-control" id="lname" name="lname" placeholder="Last Name" required>
            </div>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Email address</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com" required>
          </div>
          <div class="mb-3 position-relative">
            <label for="pass1" class="form-label">Password</label>
            <input type="password" class="form-control" id="pass1" name="pass1" placeholder="Choose a password" required>
            <small class="text-muted">Must be at least 8 characters long.</small>
          </div>
          <div class="mb-3 position-relative">
            <label for="pass2" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="pass2" name="pass2" placeholder="Confirm password" required>
          </div>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="showPassword" onclick="togglePassword()">
            <label class="form-check-label" for="showPassword">Show Password</label>
          </div>
          <button type="submit" class="btn btn-primary w-100">Sign Up</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-4" id="loginModalTitle">Login</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="/login/" method="post">
          {% csrf_token %}
          <div class="mb-3">
            <label for="loginusername" class="form-label">Username</label>
            <input type="text" class="form-control" id="loginusername" name="loginusername" placeholder="Enter username" required>
          </div>
          <div class="mb-3 position-relative">
            <label for="loginpass" class="form-label">Password</label>
            <input type="password" class="form-control" id="loginpassword" name="loginpassword" placeholder="Enter password" required>
          </div>
          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="showLoginPassword" onclick="toggleLoginPassword()">
            <label class="form-check-label" for="showLoginPassword">Show Password</label>
          </div>
          <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% if messages %}
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

      {% block body %}{% endblock body %}
      
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
  {% block js %}{% endblock js %}
  <script>

      window.addEventListener("DOMContentLoaded", function () {
        {% if not user.is_authenticated %}
          setTimeout(function () {
            const signupModal = new bootstrap.Modal(document.getElementById('signupModal'));
            signupModal.show();
          }, 5000); // Show modal after 5 seconds
        {% endif %}
      });
    
  
    
    function togglePassword() {
      let pass1 = document.getElementById("pass1");
      let pass2 = document.getElementById("pass2");
      if (pass1.type === "password") {
        pass1.type = "text";
        pass2.type = "text";
      } else {
        pass1.type = "password";
        pass2.type = "password";
      }
    }
    function toggleLoginPassword() {
      let loginPass = document.getElementById("loginpass");
      loginPass.type = loginPass.type === "password" ? "text" : "password";
    }
    //This queary for Auto-Dismiss Alert
    setTimeout(function() {
      let alerts = document.querySelectorAll(".alert");
      alerts.forEach(alert => {
          alert.style.display = "none";
      });
  }, 6000); // Hides alert after 6 seconds

  function toggleLoginPassword() {
    const passwordField = document.getElementById("loginpassword");
    if (passwordField.type === "password") {
      passwordField.type = "text";
    } else {
      passwordField.type = "password";
    }
  }
    // For Dark Mode 
    const toggleBtn = document.getElementById('darkToggle');
    const body = document.body;
  
    // Apply saved theme on page load
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-mode');
      toggleBtn.textContent = '☀️ Light Mode';
    }
  
    toggleBtn.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const isDark = body.classList.contains('dark-mode');
      toggleBtn.textContent = isDark ? '☀️ Light Mode' : '🌙 Dark Mode';
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });
  
    </script>
  {% block script %}{% endblock script %}
</html>